<tc-column-config [columns]="columns" [(displayedColumns)]="displayedColumns"></tc-column-config>
<div class="table-container mat-elevation-z8">
    <context-menu [links]="contextMenu"></context-menu>
    <mat-table [dataSource]="dataSource" matSort cdkDropListGroup>

        <ng-container matColumnDef="select">
            <mat-header-cell *matHeaderCellDef>
                <terra-checkbox (change)="$event ? masterToggle() : null"
                                (click)="$event.stopPropagation()"
                                [value]="selection.hasValue() && isAllSelected()"
                                [isIndeterminate]="selection.hasValue() && !isAllSelected()">
                </terra-checkbox>
            </mat-header-cell>
            <mat-cell *matCellDef="let row">
                <terra-checkbox (change)="$event ? selection.toggle(row) : null"
                                (click)="$event.stopPropagation()"
                                [value]="selection.isSelected(row)">
                </terra-checkbox>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="id">
            <mat-header-cell *matHeaderCellDef
                             mat-sort-header
                             [tcTooltip]="'This is a fancy ID'"
                             cdkDropList
                             cdkDropListLockAxis="x"
                             cdkDropListOrientation="horizontal"
                             (cdkDropListDropped)="dropListDropped('id')"
                             cdkDrag
                             (cdkDragStarted)="dragStarted('id')"> ID
            </mat-header-cell>

            <div *cdkDragPreview cdkDragHandle>hallo</div>
            <mat-cell *matCellDef="let element"> {{element.id}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="value">
            <mat-header-cell *matHeaderCellDef
                             mat-sort-header
                             cdkDropList
                             cdkDropListLockAxis="x"
                             cdkDropListOrientation="horizontal"
                             (cdkDropListDropped)="dropListDropped('value')"
                             cdkDrag
                             (cdkDragStarted)="dragStarted('value')"> Value
            </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.value}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="email">
            <mat-header-cell *matHeaderCellDef
                             cdkDropList
                             cdkDropListLockAxis="x"
                             cdkDropListOrientation="horizontal"
                             (cdkDropListDropped)="dropListDropped('email')"
                             cdkDrag
                             (cdkDragStarted)="dragStarted('email')"> Email
            </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.mail}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="link">
            <mat-header-cell *matHeaderCellDef
                             cdkDropList
                             cdkDropListLockAxis="x"
                             cdkDropListOrientation="horizontal"
                             (cdkDropListDropped)="dropListDropped('link')"
                             cdkDrag
                             (cdkDragStarted)="dragStarted('link')"> Link
            </mat-header-cell>
            <mat-cell *matCellDef="let element">
                <a href="{{element.link}}" target="_blank">Das ist ein Link</a>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="actions">
            <mat-header-cell *matHeaderCellDef></mat-header-cell>
            <mat-cell *matCellDef="let element">
                <terra-button [inputIsSmall]="true"
                              [inputIcon]="'icon-delete'"
                              (outputClicked)="onDeleteClick(element)"></terra-button>
            </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"
                 hasContextMenu
                 [rowData]="row"
                 [ngClass]="{'isActive': selection.isSelected(row), 'disabled': row.disabled}"></mat-row>
    </mat-table>
</div>
