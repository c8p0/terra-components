// material select

mat-form-field {
    &.mat-focused {
        &.mat-form-field-appearance-legacy {
            .mat-form-field-wrapper {
                .mat-form-field-flex {
                    .mat-form-field-infix {
                        mat-select {
                            .mat-select-trigger {
                                .mat-select-arrow-wrapper {
                                    .mat-select-arrow {
                                        color: var(--color-active);
                                    }
                                }
                            }
                        }
                        
                        .mat-form-field-label-wrapper {
                            .mat-form-field-label {
                                color: var(--color-active);
                            }
                        }
                    }
                }
            }
        }
    }
    
    &.mat-form-field-appearance-legacy {
        &.ng-valid,
        &.ng-invalid {
            .mat-form-field-wrapper {
                padding-bottom: .75em;
                
                .mat-form-field-underline {
                    bottom: 1em;
                }
            }
        }
        
        &.ng-invalid {
            .mat-form-field-wrapper {
                .mat-form-field-underline {
                    .mat-form-field-ripple {
                        background-color: var(--color-alert);
                    }
                }
            }
        }
        
        &.mat-form-field-disabled {
            .mat-form-field-wrapper {
                .mat-form-field-underline {
                    border-bottom: inherit;
                }
                
                .mat-form-field-flex {
                    .mat-form-field-infix {
                        .mat-form-field-label-wrapper {
                            .mat-form-field-label {
                                mat-label {
                                    color: var(--color-structure-6);
                                }
                            }
                        }
                    }
                }
            }
        }
        
        .mat-form-field-wrapper {
            padding-bottom: 0;
            
            .mat-form-field-flex {
                .mat-form-field-infix {
                    border-top: 1em solid transparent;
                    padding: calc(var(--space-sm) * 1.5) 0 calc(var(--space-sm) * 1.5) 0;
                    
                    mat-select {
                        .mat-select-trigger {
                            .mat-select-value {
                                .mat-select-value-text {
                                    color: var(--color-structure-12);
                                    font-weight: var(--font-weight-2);
                                }
                            }
                        }
                    }
                    
                    .mat-form-field-label-wrapper {
                        .mat-form-field-label {
                            mat-label {
                                color: var(--color-structure-7);
                            }
                        }
                    }
                }
            }
            
            .mat-form-field-underline {
                border-bottom: var(--input-wrapper-border, 1px solid var(--border-color));
                bottom: 0;
                
                .mat-form-field-ripple {
                    background-color: var(--color-active);
                }
            }
        }
    }
}

.cdk-overlay-container {
    .cdk-overlay-connected-position-bounding-box {
        .cdk-overlay-pane {
            .mat-select-panel-wrap {
                .mat-select-panel {
                    border-radius: var(--border-radius);
                    box-shadow: var(--box-shadow);
                    
                    &.mat-primary {
                        mat-option {
                            &.mat-selected {
                                &:not(.mat-option-disabled) {
                                    color: var(--color-structure-0);
                                    background-color: var(--color-active);
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
